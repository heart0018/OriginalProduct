:root {
  --auth-speed: 60s;
  --fade-dur: 2s;
  --ease-soft: cubic-bezier(0.22, 1, 0.36, 1);
  /* 1秒早く出す */
  --type-delay: 1.4s; /* 2.4s → 1.4s */
  --type-dur: 2.6s;
}

/* 旧 .auth-bg-marquee/.auth-strip は使わない（削除 or 未使用のまま） */

/* 2トラック方式 */
.auth-bg-track {
  position: absolute;
  inset-inline: 0;
  top: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  will-change: transform;
  animation: auth-scroll-a var(--auth-speed) linear infinite;
}
.auth-bg-track--clone {
  animation: auth-scroll-b var(--auth-speed) linear infinite;
}
.auth-bg-track img {
  display: block;
  width: auto; /* 元サイズ尊重 */
  height: auto;
  max-width: 100vw; /* 画面より大きい場合だけ縮小 */
  filter: none; /* 暗くしない */
}

/* 下→上ループ（A: 0→100%、B: -100%→0%）*/
@keyframes auth-scroll-a {
  from {
    transform: translateY(0%);
  }
  to {
    transform: translateY(100%);
  }
}
@keyframes auth-scroll-b {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0%);
  }
}

/* 円カード＋2sフェードの時点へ戻す */

/* 前面UIのセンタリング */
.auth-overlay {
  position: relative;
  z-index: 1;
  min-height: 100vh;
  display: grid;
  place-items: center;
  padding: 24px;
  text-align: center;
  color: #fff;
}

/* 円形カード */
.auth-overlay .auth-card {
  width: min(82vw, 420px);
  height: min(82vw, 420px);
  border-radius: 50%;
  display: grid;
  place-items: center;
  gap: 6px; /* 10px → 6px に詰める */
  padding: 24px;
  background: color-mix(in oklab, #00000093 60%, transparent);
  backdrop-filter: blur(3px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);

  /* 親（円）を2sでふわっと */
  opacity: 0;
  animation: fade-up 1.3s ease-out both;
  will-change: transform, opacity, filter;
}

/* タイトル：グラデ＋下線（2s後に走る） */
.auth-title {
  font-weight: bold;
  margin: 0;
  font-size: clamp(36px, 6vw, 56px); /* もっと大きく */
  display: inline-block;
  background: linear-gradient(to right, #3b82f6, #34d399);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  -webkit-text-fill-color: transparent;
  position: relative;
  line-height: 1.2;
  letter-spacing: -0.02em;
  font-kerning: normal;
  font-feature-settings: "palt";

  opacity: 0;
  animation: fade-up-child 2s ease-out both;
}
.auth-title::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -10px;
  width: 100%;
  height: 3px;
  background: linear-gradient(to right, #3b82f6, #34d399);
  border-radius: 9999px;
  transform: scaleX(0);
  transform-origin: left center;
  animation: underline-sweep 1.3s ease-out 1.3s both; /* 親の2s後に発火 */
}

/* auth-sub: 改行可＋タイプ風（旧: width:0ch/キャレット系は削除） */
.auth-sub {
  margin: 4px 0 8px;
  font-weight: 600;
  font-size: clamp(14px, 3.5vw, 18px);
  color: rgba(255, 255, 255, 0.92);

  display: block; /* 改行を自然に */
  white-space: normal; /* ← 改行可能にする */
  overflow: visible;
  /* 最後にふわっと（タイトル/ボタン後に開始） */
  opacity: 0;
  transform: translateY(16px) scale(0.98);
  animation: sub-fade var(--fade-dur) var(--ease-soft) var(--type-delay)
      forwards,
    sub-bg-in 220ms var(--ease-soft) calc(var(--type-delay) + var(--fade-dur))
      forwards; /* 背景は後から */
  padding: 8px 12px; /* 背景見せたい場合 */
  border-radius: 12px;
  background: transparent; /* sub-bg-inで出す */
}

/* 1文字ずつふわっと出す（改行は自然に回り込み） */
.auth-sub__char {
  opacity: 0;
  display: inline; /* 改行時に自然に折り返す */
  will-change: opacity, transform;
  transform: translateY(0.4em);
  animation: char-in 100ms var(--ease-soft) forwards;
  /* 文字ごとに遅延。全体のフェード完了後に開始 */
  animation-delay: calc(
    var(--type-delay) + var(--fade-dur) + (var(--i) * 70ms)
  );
}

/* 既存のキーframesを流用＋追加 */
@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
    filter: blur(2px);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}
@keyframes fade-up-child {
  from {
    opacity: 0;
    filter: blur(2px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}
@keyframes underline-sweep {
  to {
    transform: scaleX(1);
  }
}
@keyframes sub-fade {
  from {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
@keyframes sub-bg-in {
  from {
    background-color: rgba(0, 0, 0, 0);
  }
  to {
    background-color: rgba(0, 0, 0, 0);
  }
}
@keyframes char-in {
  from {
    opacity: 0;
    transform: translateY(0.4em);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* スマホ縦 390×844 の調整 */
@media (max-width: 390px) and (max-height: 844px) and (orientation: portrait) {
  /* モバイルはタイピングを少し短くしてダレを防ぐ（任意） */
  :root {
    --type-dur: 1.5s;
  }

  .auth-overlay {
    padding-inline: max(16px, env(safe-area-inset-left));
    padding-block: max(16px, env(safe-area-inset-top))
      max(24px, env(safe-area-inset-bottom));
  }
  .auth-overlay .auth-card {
    width: clamp(240px, 78vw, 340px);
    height: clamp(240px, 78vw, 340px);
    padding: 16px;
    gap: 6px; /* 8px → 6px に詰める */
  }
  .auth-title {
    font-size: clamp(26px, 8vw, 34px); /* モバイル側も拡大 */
    letter-spacing: -0.015em;
  }
  .auth-title::after {
    bottom: -6px;
    height: 2px;
  }
  .auth-sub {
    font-size: clamp(12px, 3.5vw, 16px);
    letter-spacing: -0.008em;
  }
  .auth-google > div {
    transform: scale(0.9);
    transform-origin: top center;
  }
}
